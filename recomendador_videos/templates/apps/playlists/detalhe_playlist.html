{% extends 'base.html' %}
{% block content %}
{% load static %}
{% load custom_filters %}

<h2>{{ playlist.nome }}</h2>
<p>{{ playlist.descricao }}</p>

<div class="video-list">
    {% if playlist.videos.all %}
        {% for pv in playlist.videos.all %}
            <div class="video-item" id="video-{{ pv.video.youtube_id }}" data-method="{{ pv.video.method }}">
                <h3>{{ pv.video.title }}</h3>
                <p>{{ pv.video.description }}</p>
                <iframe class="video-iframe" 
                        width="560" height="315" 
                        src="https://www.youtube.com/embed/{{ pv.video.youtube_id }}" 
                        frameborder="0" allowfullscreen
                        data-video-id="{{ pv.video.youtube_id }}"></iframe>
               <!--- <div class="like-dislike-container"> 
                    <button class="rate-button {% if user_ratings|get_item:pv.video.youtube_id == 1 %}liked{% endif %}"
                        data-url="{% url 'rate_video' pv.video.youtube_id %}"
                        data-video-id="{{ pv.video.youtube_id }}" 
                        data-rating="1">Curtir</button>
                    <button class="rate-button {% if user_ratings|get_item:pv.video.youtube_id == -1 %}disliked{% endif %}"
                        data-url="{% url 'rate_video' pv.video.youtube_id %}"
                        data-video-id="{{ pv.video.youtube_id }}" 
                        data-rating="-1">Não Curtir</button>
                </div>
                <div class="rating-message"></div>--> 
            </div>
        {% endfor %}
    {% else %}
        <p>Nenhum vídeo encontrado.</p>
    {% endif %}
</div>
{% if request.user == playlist.usuario %}
    <a href="{% url 'editar_playlist' playlist.id %}">Editar</a>
    <a href="{% url 'deletar_playlist' playlist.id %}">Deletar</a>
{% endif %}

<br>
<a href="{% url 'lista_playlists' %}"> voltar para listagem</a>

<script src="{% static 'js/playlist.js' %}"></script>
<script src="{% static 'js/recommendation.js' %}"></script>
{% endblock %}
