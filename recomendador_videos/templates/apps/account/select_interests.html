{% extends 'base.html' %}

{% block content %}
  <h2>Selecione suas Ã¡reas de interesse</h2>
  <form method="post">
    {% csrf_token %}
    {% for interest in form.interests.field.queryset %}
      {% if interest.is_root %}
        {% include 'interest_recursive.html' with interest=interest selected_interests=form.initial.interests %}
      {% endif %}
    {% endfor %}
    <button type="submit">Salvar</button>
  </form>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const categories = document.querySelectorAll('.interest-category > label > input');
      categories.forEach(input => {
        input.addEventListener('click', function() {
          const subInterests = this.closest('.interest-category').querySelector('.sub-interests');
          if (subInterests) {
            if (this.checked) {
              subInterests.style.display = 'block';
            } else {
              subInterests.style.display = 'none';
              subInterests.querySelectorAll('input').forEach(subInput => subInput.checked = false);
            }
          }
        });
      });
    });
  </script>
{% endblock %}
